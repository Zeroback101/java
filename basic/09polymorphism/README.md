# 다형성

### 1. 다형적 참조
부모 변수가 자식 인스턴스를 참조하는 것
```java
Parent polyP = new Child();
```
- 부모는 자식을 담을 수 있다. (손자도 가능)
- 부모 인스턴스와 자식 인스턴스가 구분되어 함께 생성된다.
- 부모의 메서드는 호출 가능하나, 자식의 메서드는 호출 불가능하다.

### 2. 캐스팅
- **다운 캐스팅**: 부모 타입을 자식 타입으로 변경하는 것
  
  ```java
  Child polyC = (Child) polyP;
  ```
  
  - `polyP`는 여전히 부모 타입이고, `polyP`의 값을 복사하여 `polyC`에 넣는다.
  - 일시적 다운 캐스팅: `((Child) polyP).childMethod();` 해당 메서드를 호출하는 순간만 다운 캐스팅, `polyP`는 여전히 부모 타입이다.
  - `ClassCastException`: 부모 인스턴스 생성 후 자식 인스턴스로 다운 캐스팅 하는 경우 발생, 다형적 참조로 생성한 부모 인스턴스만 다운 캐스팅 가능!
- **업 캐스팅**: 자식 타입을 부모 타입으로 변경하는 것
  
  ```java
  Parent parent = child; // 업캐스팅 생략 가능
  ```
  
  - 업캐스팅은 언제든 가능하다.
 
- **컴파일 오류 VS 런타임 오류**
  - 컴파일 오류: 자바 프로그램을 실행하기 전에 발생하는 오류이므로 IDE 측에서 확인이 가능하다. 따라서 안전하고 좋은 오류이다.
  - 런타임 오류: 프로그램이 실행되고 있는 도중에 발생하는 오류이므로 안좋은 오류이다.

### 3. instanceof
- `[변수] instanceof [클래스]`: 인스턴스 타입을 확인, 오른쪽 클래스 인스턴스에 왼쪽 변수의 인스턴스를 담을 수 있는가?
  
  ```java
  parent instanceof Child
  new Child() instanceof Child // 이렇게 변환해서 생각하면 편함.
  ```
  
- 자바 16부터 instanceof에서 바로 변수를 대입가능함
  
  ```java
  polyP instanceof Child child
  ```

### 4. 다형성과 메서드 오버라이딩
- 다형적 참조에서 자식 클래스가 부모 클래스의 메서드를 오버라이딩 한 경우, 자식의 메서드를 사용한다.

  ```java
  Parent poly = new Child(); // 자식 인스턴스 사용 가능한 부모 
  poly.method(); // 메서드 오버라이딩, 오버라이딩 된 메서드는 항상 우선권을 가짐
  ```
